{% extends 'base.html' %}

{% load leaflet_tags static floppyforms %}

{% block extra_head %}
    {% leaflet_js plugins="forms" %}
    {% leaflet_css plugins="forms" %}
    <link href="{% static "css/group_buttons.css" %}" rel="stylesheet">
{% endblock %}

{% block breadcrumbs %}
  <ol class="breadcrumb">
    <li><a href="#">Home</a></li>
    <li class="active">Create new event</li>
  </ol>
{% endblock %}

{% block main %}

<form method="post">
  {% csrf_token %}
  {% for form_name, form in forms.items %}
    <legend>{{ form_name|title }} details </legend>
    {% form form using %}
      {% formconfig row using "floppyforms/rows/bootstrap.html" %}
      {% formconfig field using "floppyforms/datetime.html" for "DateTimeField" %}
      {% comment %}
        {% block errors %}
          {% for error in form.non_field_errors %}
              <div class="alert alert-error">
                  <a class="close" href="#" data-dismiss="alert">×</a>
                  {{ error }}
              </div><!--- .alert.alert-error -->
          {% endfor %}
          {% for error in form|hidden_field_errors %}
              <div class="alert alert-error">
                  <a class="close" href="#" data-dismiss="alert">×</a>
                  {{ error }}
              </div><!--- .alert.alert-error -->
          {% endfor %}
        {% endblock errors %}
      {% endcomment %}
      {% block rows %}
        {% for field in form.visible_fields %}
            {% block row %}{% formrow field %}{% endblock %}
        {% endfor %}
        {% if not form.visible_fields %}
          {% for field in form.hidden_fields %}
            {% formfield field %}
          {% endfor %}
        {% endif %}
      {% endblock %}
    {% endform %}
  {% endfor %}
    <div class="ui-group-buttons pull-right marginBottom10">
      <button type="submit" class="btn btn-success">Save</button>
      <div class="or"></div>
      <a href="." class="btn btn-danger">Cancel</a>
    </div>
</form>
{% endblock %}

{% block extra_scripts %}
    {% for form in forms.values %}
        {{ form.media }}
    {% endfor %}
{% endblock %}
